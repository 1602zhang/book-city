"use strict";define(["jquery","text!../../tpl/banner.html","template","swiper","text!../../tpl/week_hot.html","text!../../tpl/recommend.html","text!../../tpl/girl.html","text!../../tpl/boy.html","text!../../tpl/time_free.html","bscroll","text!../../tpl/load.html","lazyload"],function(o,n,c,d,r,m,h,p,u,b,f,t){o.ajax({url:"/book/index",dataType:"json",success:function(t){!function(t){var a={items:t.items[3].data.data.splice(0,5)},e={items:t.items[4].data.data.splice(0,5)},i={items:t.items[3].data.data};c(n,t.items[0].data,".banner"),c(r,t.items[1],".week_hot"),c(m,t.items[2],".recommend"),c(h,t.items[3],".girl"),c(f,a,".girl"),c(p,t.items[4],".boy"),c(f,e,".boy"),c(u,t.items[5],".time_free");new d(".banner",{autoplay:{delay:1e3},loop:!0});c(f,i,".book-table")}(t),o("img.lazy").lazyload({effect:"fadeIn",placeholder:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=144632695,524315860&fm=27&gp=0.jpg",failurelimit:100,container:".con1"}),o("img.lazy").lazyload({effect:"fadeIn",placeholder:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=144632695,524315860&fm=27&gp=0.jpg",failurelimit:100,container:".book-table"});var a=new d(".main",{on:{slideChangeTransitionStart:function(){var t=this.activeIndex;o(".header span").eq(t).addClass("active").siblings().removeClass("active")}}});o(".header span").on("click",function(){o(this).addClass("active").siblings().removeClass("active"),a.slideTo(o(this).index())});var e=new b("#tab1",{probeType:2,click:!0}),i="上拉加载更多...",l="释放刷新...",s=1;e.on("scroll",function(){this.y<this.maxScrollY-40?o("#tab1 .con1").attr("data-up",l):this.y<this.maxScrollY-20&&o("#tab1 .con1").attr("data-up",i)}),e.on("scrollEnd",function(){o("#tab1 .con1").attr("data-up",i)}),e.on("touchEnd",function(){o("#tab1 .con1").attr("data-up")===l&&(3<s&&o("#tab1 .con1").attr("data-up","暂无数据更新"),o.ajax({url:"/book/list",data:{page:s,limit:10},dataType:"json",success:function(t){c(f,t,".load"),o("img.lazy").lazyload({effect:"fadeIn",placeholder:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=144632695,524315860&fm=27&gp=0.jpg",failurelimit:100,container:".load"})}}),s++)});new b("#tab2",{click:!0});o(".shelf_btn").on("click",function(){o(this).hasClass("active")?(o(this).removeClass("active"),o(".book-table").removeClass("show")):(o(this).addClass("active"),o(".book-table").addClass("show"))})}})});